<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LocalCricbuzz - India's Local Cricket Hub</title>
    <link rel="stylesheet" href="cricbuzz-style.css">
</head>
<body>
    <!-- Header - Cricbuzz Style -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                üèè LocalCricbuzz
            </div>
            <nav>
                <ul class="nav-menu">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#live">Live Scores</a></li>
                    <li><a href="tournaments.html">Tournaments</a></li>
                    <li><a href="players.html">Players</a></li>
                </ul>
            </nav>
            <div class="user-actions">
                <a href="register-tournament.html" class="btn btn-primary">Register Team (‚Çπ1000)</a>
                <a href="login.html" class="btn btn-secondary">Login</a>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <div style="background: linear-gradient(135deg, #09aa34, #078025); color: white; padding: 3rem 0; text-align: center;">
        <div class="container">
            <h1 style="font-size: 2.5rem; margin-bottom: 0.5rem;">India's Local Cricket Hub</h1>
            <p style="font-size: 1.2rem; opacity: 0.9;">Tennis Cricket, Street Cricket, Society Matches - ‡§∏‡§ó‡§≥‡§Ç ‡§è‡§ï‡§æ‡§ö ‡§†‡§ø‡§ï‡§æ‡§£‡•Ä!</p>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container">
        <!-- Live Matches Section -->
        <div class="live-section" id="live">
            <div class="section-header">
                <h2 class="section-title">üî¥ Live Matches</h2>
                <a href="live-matches.html" class="view-all">View All ‚Üí</a>
            </div>
            <div id="liveMatchesContainer">
                <div class="loading">Loading live matches...</div>
            </div>
        </div>

        <!-- Recent Matches -->
        <div class="live-section">
            <div class="section-header">
                <h2 class="section-title">Recent Matches</h2>
                <a href="matches.html" class="view-all">View All ‚Üí</a>
            </div>
            <div id="recentMatchesContainer">
                <div class="loading">Loading recent matches...</div>
            </div>
        </div>

        <!-- Tournaments Section -->
        <div class="live-section">
            <div class="section-header">
                <h2 class="section-title">üèÜ Active Tournaments</h2>
                <a href="tournaments.html" class="view-all">View All ‚Üí</a>
            </div>
            <div id="tournamentsContainer">
                <div class="loading">Loading tournaments...</div>
            </div>
        </div>

        <!-- Registration CTA -->
        <div class="reg-card">
            <h2>üéØ Register Your Team</h2>
            <div class="price">‚Çπ1000</div>
            <p style="font-size: 1.1rem; margin-bottom: 1.5rem;">Play in India's biggest local cricket tournaments!</p>
            <a href="register-tournament.html" class="btn btn-primary" style="display: inline-block;">Register Now</a>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2026 LocalCricbuzz - India's Local Cricket Platform</p>
        <p style="margin-top: 0.5rem; opacity: 0.8;">Made with ‚ù§Ô∏è for Cricket Lovers</p>
    </footer>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="js/config.js"></script>
    <script>
        // Load Live Matches
        function loadLiveMatches() {
            db.ref('matches').orderByChild('status').equalTo('live').limitToFirst(3).on('value', (snapshot) => {
                const container = document.getElementById('liveMatchesContainer');
                
                if (!snapshot.exists()) {
                    container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">‡§ï‡•ã‡§£‡§§‡•á‡§π‡•Ä live matches ‡§®‡§æ‡§π‡•Ä‡§§ ‡§∏‡§ß‡•ç‡§Ø‡§æ</p>';
                    return;
                }
                
                container.innerHTML = '';
                snapshot.forEach((childSnapshot) => {
                    const match = childSnapshot.val();
                    match.id = childSnapshot.key;
                    container.innerHTML += createMatchCard(match);
                });
            });
        }

        // Load Recent Matches
        function loadRecentMatches() {
            db.ref('matches').orderByChild('timestamp').limitToLast(3).on('value', (snapshot) => {
                const container = document.getElementById('recentMatchesContainer');
                
                if (!snapshot.exists()) {
                    container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">‡§Ö‡§ú‡•Ç‡§® matches ‡§®‡§æ‡§π‡•Ä‡§§</p>';
                    return;
                }
                
                container.innerHTML = '';
                const matches = [];
                snapshot.forEach((childSnapshot) => {
                    const match = childSnapshot.val();
                    match.id = childSnapshot.key;
                    matches.unshift(match);
                });
                
                matches.forEach(match => {
                    if (match.status !== 'live') {
                        container.innerHTML += createMatchCard(match);
                    }
                });
            });
        }

        // Load Active Tournaments
        function loadTournaments() {
            db.ref('tournaments').orderByChild('status').equalTo('active').limitToFirst(3).on('value', (snapshot) => {
                const container = document.getElementById('tournamentsContainer');
                
                if (!snapshot.exists()) {
                    container.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">‡§ï‡•ã‡§£‡§§‡•á‡§π‡•Ä active tournaments ‡§®‡§æ‡§π‡•Ä‡§§</p>';
                    return;
                }
                
                container.innerHTML = '';
                snapshot.forEach((childSnapshot) => {
                    const tournament = childSnapshot.val();
                    tournament.id = childSnapshot.key;
                    container.innerHTML += createTournamentCard(tournament);
                });
            });
        }

        // Create Match Card
        function createMatchCard(match) {
            const statusBadge = match.status === 'live' ? 
                '<span class="live-badge">‚óè LIVE</span>' :
                match.status === 'completed' ?
                '<span style="background: #4caf50; color: white; padding: 0.3rem 0.7rem; border-radius: 3px; font-size: 0.75rem;">‚úì Completed</span>' :
                '<span style="background: #ff9800; color: white; padding: 0.3rem 0.7rem; border-radius: 3px; font-size: 0.75rem;">Upcoming</span>';

            return `
                <div class="match-card" onclick="viewMatch('${match.id}')">
                    <div class="match-header">
                        <div class="match-type">${match.tournament || 'Friendly Match'} ‚Ä¢ ${match.venue || 'Local Ground'}</div>
                        ${statusBadge}
                    </div>
                    <div class="match-info">
                        <div class="team-row">
                            <span class="team-name">${match.team1.name}</span>
                            <span class="team-score">${match.team1.score || '0/0'} (${match.team1.overs || '0.0'})</span>
                        </div>
                        <div class="team-row">
                            <span class="team-name">${match.team2.name}</span>
                            <span class="team-score">${match.team2.score || '0/0'} (${match.team2.overs || '0.0'})</span>
                        </div>
                    </div>
                    <div class="match-status">
                        ${match.currentInfo || 'Match not started'}
                    </div>
                </div>
            `;
        }

        // Create Tournament Card
        function createTournamentCard(tournament) {
            return `
                <div class="match-card" onclick="window.location.href='tournament-details.html?id=${tournament.id}'">
                    <div class="match-header">
                        <div class="match-type">üèÜ ${tournament.location}</div>
                        <span style="background: #4caf50; color: white; padding: 0.3rem 0.7rem; border-radius: 3px; font-size: 0.75rem;">Active</span>
                    </div>
                    <h3 style="margin: 0.5rem 0; font-size: 1.1rem;">${tournament.name}</h3>
                    <div style="display: flex; justify-content: space-between; margin-top: 0.8rem; padding-top: 0.8rem; border-top: 1px solid #e0e0e0; font-size: 0.9rem; color: #666;">
                        <span>üìÖ ${tournament.startDate}</span>
                        <span>üí∞ ‚Çπ${tournament.registrationFee}</span>
                    </div>
                </div>
            `;
        }

        // View Match
        function viewMatch(matchId) {
            window.location.href = `match-details.html?id=${matchId}`;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadLiveMatches();
            loadRecentMatches();
            loadTournaments();
        });
    </script>
</body>
</html>
